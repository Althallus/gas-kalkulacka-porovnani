<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>F!Dos Porovnání produktů</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <!-- jsPDF for PDF export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <!-- Custom CSS -->
    <?!= include('styles'); ?>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand fw-bold" href="#">
                <i class="bi bi-calculator"></i> F!Dos Porovnání produktů
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <button class="btn btn-outline-light btn-sm me-2" onclick="exportToPDF()">
                            <i class="bi bi-file-pdf"></i> Export PDF
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="btn btn-outline-light btn-sm" onclick="exportToGoogleSheets()" id="exportSheetsBtn">
                            <i class="bi bi-file-earmark-spreadsheet"></i> Export do Sheets
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <!-- Nastavení kalkulace -->
        <div class="card settings-card mb-4">
            <div class="card-header">
                <h5 class="card-title mb-0">
                    <i class="bi bi-gear"></i> Nastavení kalkulace
                </h5>
            </div>
            <div class="card-body">
                <div class="row g-3">
                    <!-- Základní vstupy -->
                    <div class="col-md-3">
                        <label for="jednoraz" class="form-label">Jednorázový vklad</label>
                        <div class="input-group">
                            <input type="text" class="form-control" id="jednoraz" placeholder="0" value="50 000">
                            <span class="input-group-text">Kč</span>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <label for="pravidelka" class="form-label">Měsíční vklad</label>
                        <div class="input-group">
                            <input type="text" class="form-control" id="pravidelka" placeholder="0" value="2 000">
                            <span class="input-group-text">Kč</span>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <label for="doba" class="form-label">Doba</label>
                        <div class="input-group">
                            <input type="number" class="form-control" id="doba" placeholder="10" value="10">
                            <span class="input-group-text">let</span>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">&nbsp;</label>
                        <button class="btn btn-primary w-100" onclick="calculateAll()">
                            <i class="bi bi-calculator"></i> Spočítat
                        </button>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">&nbsp;</label>
                        <button class="btn btn-outline-primary w-100" data-bs-toggle="modal" data-bs-target="#settingsModal">
                            <i class="bi bi-sliders"></i> Nastavení
                        </button>
                    </div>
                </div>
                
                <!-- Filtry produktů -->
                <div class="row mt-3">
                    <div class="col-12">
                        <label class="form-label">Produkty k porovnání:</label>
                        <div class="d-flex flex-wrap gap-3">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="check_sporak" checked>
                                <label class="form-check-label" for="check_sporak">Spořící účet</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="check_stavebko" checked>
                                <label class="form-check-label" for="check_stavebko">Stavební spoření</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="check_penzijko" checked>
                                <label class="form-check-label" for="check_penzijko">Penzijní spoření</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="check_investice" checked>
                                <label class="form-check-label" for="check_investice">Investice</label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Filtry zobrazení -->
                <div class="row mt-3">
                    <div class="col-12">
                        <label class="form-label">Zobrazení hodnot:</label>
                        <div class="d-flex flex-wrap gap-3">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="check_nominal" checked>
                                <label class="form-check-label" for="check_nominal">Nominální hodnoty</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="check_real" checked>
                                <label class="form-check-label" for="check_real">Reálné hodnoty</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="check_plusy" checked>
                                <label class="form-check-label" for="check_plusy">Plusy & mínusy</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Výsledky -->
        <div id="results" class="row g-4">
            <!-- Spořící účet -->
            <div class="col-lg-6" id="sporak_container">
                <div class="card product-card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">
                            <i class="bi bi-piggy-bank"></i> Spořící / Běžný účet
                        </h5>
                    </div>
                    <div class="card-body">
                        <!-- Nominální hodnoty -->
                        <div class="nominal-section">
                            <h6 class="text-primary">
                                <i class="bi bi-graph-up"></i> Nominální hodnoty
                            </h6>
                            <div class="row">
                                <div class="col-6">Vloženo:</div>
                                <div class="col-6 result-value" id="sporak_vlozeno">-</div>
                            </div>
                            <div class="row">
                                <div class="col-6">Úrok p.a.:</div>
                                <div class="col-6 result-value" id="sporak_urok">-</div>
                            </div>
                            <div class="row">
                                <div class="col-6">Celkem na konci:</div>
                                <div class="col-6 result-value" id="sporak_celkem">-</div>
                            </div>
                            <div class="row">
                                <div class="col-6">Celková výkonnost:</div>
                                <div class="col-6 result-value" id="sporak_vykonnost">-</div>
                            </div>
                            <hr>
                        </div>
                        
                        <!-- Reálné hodnoty -->
                        <div class="real-section">
                            <h6 class="text-info">
                                <i class="bi bi-graph-down"></i> Reálné hodnoty
                            </h6>
                            <div class="row">
                                <div class="col-6">Reálná úroková míra:</div>
                                <div class="col-6 result-value" id="sporak_r_urok">-</div>
                            </div>
                            <div class="row">
                                <div class="col-6">Reálně na konci:</div>
                                <div class="col-6 result-value" id="sporak_r_celkem">-</div>
                            </div>
                            <div class="row">
                                <div class="col-6">Reálný výnos:</div>
                                <div class="col-6 result-value" id="sporak_r_vynos">-</div>
                            </div>
                            <div class="row">
                                <div class="col-6">Úrok po zdanění:</div>
                                <div class="col-6 result-value" id="sporak_urok_po_dani">-</div>
                            </div>
                            <hr>
                        </div>
                        
                        <!-- Plusy a mínusy -->
                        <div class="plusy-section">
                            <h6 class="text-secondary">
                                <i class="bi bi-list-check"></i> Plusy & mínusy
                            </h6>
                            <div class="d-flex align-items-center mb-1">
                                <i class="bi bi-plus-circle text-success me-2"></i>
                                <small>Pojištění vkladů</small>
                            </div>
                            <div class="d-flex align-items-center mb-1">
                                <i class="bi bi-plus-circle text-success me-2"></i>
                                <small>Peníze hned po ruce</small>
                            </div>
                            <div class="d-flex align-items-center mb-1">
                                <i class="bi bi-dash-circle text-danger me-2"></i>
                                <small>Nízký úrok pod úrovní inflace</small>
                            </div>
                            <div class="d-flex align-items-center mb-1">
                                <i class="bi bi-dash-circle text-danger me-2"></i>
                                <small>Zdanění už tak nízkého úroku</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Investice -->
            <div class="col-lg-6" id="investice_container">
                <div class="card product-card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">
                            <i class="bi bi-graph-up-arrow"></i> Investice
                            <small class="ms-2" id="investice_doba_info"></small>
                        </h5>
                    </div>
                    <div class="card-body">
                        <!-- Nominální hodnoty -->
                        <div class="nominal-section">
                            <h6 class="text-primary">
                                <i class="bi bi-graph-up"></i> Nominální hodnoty
                            </h6>
                            <div class="row">
                                <div class="col-6">Vloženo:</div>
                                <div class="col-6 result-value" id="investice_vlozeno">-</div>
                            </div>
                            <div class="row">
                                <div class="col-6">Očekávaný výnos:</div>
                                <div class="col-6 result-value" id="investice_urok">-</div>
                            </div>
                            <div class="row">
                                <div class="col-6">Celkem na konci:</div>
                                <div class="col-6 result-value" id="investice_celkem">-</div>
                            </div>
                            <div class="row">
                                <div class="col-6">Absolutní výnos:</div>
                                <div class="col-6 result-value" id="investice_vykonnost">-</div>
                            </div>
                            <hr>
                        </div>
                        
                        <!-- Reálné hodnoty -->
                        <div class="real-section">
                            <h6 class="text-info">
                                <i class="bi bi-graph-down"></i> Reálné hodnoty
                            </h6>
                            <div class="row">
                                <div class="col-6">Reálná úroková míra:</div>
                                <div class="col-6 result-value" id="investice_r_urok">-</div>
                            </div>
                            <div class="row">
                                <div class="col-6">Reálně na konci:</div>
                                <div class="col-6 result-value" id="investice_r_celkem">-</div>
                            </div>
                            <div class="row">
                                <div class="col-6">Reálný výnos:</div>
                                <div class="col-6 result-value" id="investice_r_vynos">-</div>
                            </div>
                            <div class="row">
                                <div class="col-6">Daň z výnosu:</div>
                                <div class="col-6 result-value" id="investice_dan">-</div>
                            </div>
                            <hr>
                        </div>
                        
                        <!-- Plusy a mínusy -->
                        <div class="plusy-section">
                            <h6 class="text-secondary">
                                <i class="bi bi-list-check"></i> Plusy & mínusy
                            </h6>
                            <div class="d-flex align-items-center mb-1">
                                <i class="bi bi-plus-circle text-success me-2"></i>
                                <small>Dostupnost peněz</small>
                            </div>
                            <div class="d-flex align-items-center mb-1">
                                <i class="bi bi-plus-circle text-success me-2"></i>
                                <small>Velké množství - každý si vybere</small>
                            </div>
                            <div class="d-flex align-items-center mb-1">
                                <i class="bi bi-plus-circle text-success me-2"></i>
                                <small>Šance na vyšší výnosy</small>
                            </div>
                            <div class="d-flex align-items-center mb-1">
                                <i class="bi bi-dash-circle text-danger me-2"></i>
                                <small>Bez garance výnosu</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Stavební spoření -->
            <div class="col-lg-6" id="stavebko_container">
                <div class="card product-card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">
                            <i class="bi bi-house"></i> Stavební spoření
                        </h5>
                    </div>
                    <div class="card-body">
                        <!-- Nominální hodnoty -->
                        <div class="nominal-section">
                            <h6 class="text-primary">
                                <i class="bi bi-graph-up"></i> Nominální hodnoty
                            </h6>
                            <div class="row">
                                <div class="col-6">Vloženo:</div>
                                <div class="col-6 result-value" id="stavebko_vlozeno">-</div>
                            </div>
                            <div class="row">
                                <div class="col-6">Úrok na vkladech:</div>
                                <div class="col-6 result-value" id="stavebko_urok">-</div>
                            </div>
                            <div class="row">
                                <div class="col-6">Celkem na konci:</div>
                                <div class="col-6 result-value" id="stavebko_celkem">-</div>
                            </div>
                            <div class="row">
                                <div class="col-6">Celková výkonnost:</div>
                                <div class="col-6 result-value" id="stavebko_vykonnost">-</div>
                            </div>
                            <div class="row">
                                <div class="col-6">Státní příspěvek ročně:</div>
                                <div class="col-6 result-value" id="stavebko_prispevek">-</div>
                            </div>
                            <div class="row">
                                <div class="col-6">Státní příspěvek celkem:</div>
                                <div class="col-6 result-value" id="stavebko_prispevek_celkem">-</div>
                            </div>
                            <hr>
                        </div>
                        
                        <!-- Reálné hodnoty -->
                        <div class="real-section">
                            <h6 class="text-info">
                                <i class="bi bi-graph-down"></i> Reálné hodnoty
                            </h6>
                            <div class="row">
                                <div class="col-6">Reálná úroková míra:</div>
                                <div class="col-6 result-value" id="stavebko_r_urok">-</div>
                            </div>
                            <div class="row">
                                <div class="col-6">Reálně na konci:</div>
                                <div class="col-6 result-value" id="stavebko_r_celkem">-</div>
                            </div>
                            <div class="row">
                                <div class="col-6">Reálný výnos:</div>
                                <div class="col-6 result-value" id="stavebko_r_vynos">-</div>
                            </div>
                            <hr>
                        </div>
                        
                        <!-- Plusy a mínusy -->
                        <div class="plusy-section">
                            <h6 class="text-secondary">
                                <i class="bi bi-list-check"></i> Plusy & mínusy
                            </h6>
                            <div class="d-flex align-items-center mb-1">
                                <i class="bi bi-plus-circle text-success me-2"></i>
                                <small>Státní příspěvky</small>
                            </div>
                            <div class="d-flex align-items-center mb-1">
                                <i class="bi bi-plus-circle text-success me-2"></i>
                                <small>Garance úroku na vkladech</small>
                            </div>
                            <div class="d-flex align-items-center mb-1">
                                <i class="bi bi-dash-circle text-danger me-2"></i>
                                <small>Peníze vázané na 6 let</small>
                            </div>
                            <div class="d-flex align-items-center mb-1">
                                <i class="bi bi-dash-circle text-danger me-2"></i>
                                <small>Bez variability nastavení</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Penzijní spoření -->
            <div class="col-lg-6" id="penzijko_container">
                <div class="card product-card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">
                            <i class="bi bi-person-check"></i> Penzijní spoření
                        </h5>
                    </div>
                    <div class="card-body">
                        <!-- Nominální hodnoty -->
                        <div class="nominal-section">
                            <h6 class="text-primary">
                                <i class="bi bi-graph-up"></i> Nominální hodnoty
                            </h6>
                            <div class="row">
                                <div class="col-6">Vloženo:</div>
                                <div class="col-6 result-value" id="penzijko_vlozeno">-</div>
                            </div>
                            <div class="row">
                                <div class="col-6">Zhodnocení vkladů:</div>
                                <div class="col-6 result-value" id="penzijko_urok">-</div>
                            </div>
                            <div class="row">
                                <div class="col-6">Celkem:</div>
                                <div class="col-6 result-value" id="penzijko_celkem">-</div>
                            </div>
                            <div class="row">
                                <div class="col-6">Celková výkonnost:</div>
                                <div class="col-6 result-value" id="penzijko_vykonnost">-</div>
                            </div>
                            <div class="row">
                                <div class="col-6">Státní příspěvek:</div>
                                <div class="col-6 result-value"><span id="penzijko_prispevek_platba">-</span> Kč</div>
                            </div>
                            <div class="row">
                                <div class="col-6">Státní příspěvek celkem:</div>
                                <div class="col-6 result-value" id="penzijko_prispevek_celkem">-</div>
                            </div>
                            <hr>
                        </div>
                        
                        <!-- Reálné hodnoty -->
                        <div class="real-section">
                            <h6 class="text-info">
                                <i class="bi bi-graph-down"></i> Reálné hodnoty
                            </h6>
                            <div class="row">
                                <div class="col-6">Reálná úroková míra:</div>
                                <div class="col-6 result-value" id="penzijko_r_urok">-</div>
                            </div>
                            <div class="row">
                                <div class="col-6">Reálně na konci:</div>
                                <div class="col-6 result-value" id="penzijko_r_celkem">-</div>
                            </div>
                            <div class="row">
                                <div class="col-6">Reálný výnos:</div>
                                <div class="col-6 result-value" id="penzijko_r_vynos">-</div>
                            </div>
                            <div class="row">
                                <div class="col-6">Výnos z tvých vkladů:</div>
                                <div class="col-6 result-value" id="penzijko_vynos_klienta">-</div>
                            </div>
                            <hr>
                        </div>
                        
                        <!-- Plusy a mínusy -->
                        <div class="plusy-section">
                            <h6 class="text-secondary">
                                <i class="bi bi-list-check"></i> Plusy & mínusy
                            </h6>
                            <div class="d-flex align-items-center mb-1">
                                <i class="bi bi-plus-circle text-success me-2"></i>
                                <small>Státní příspěvky</small>
                            </div>
                            <div class="d-flex align-items-center mb-1">
                                <i class="bi bi-plus-circle text-success me-2"></i>
                                <small>3 investiční strategie na výběr</small>
                            </div>
                            <div class="d-flex align-items-center mb-1">
                                <i class="bi bi-dash-circle text-danger me-2"></i>
                                <small>Peníze vázané do důchodu</small>
                            </div>
                            <div class="d-flex align-items-center mb-1">
                                <i class="bi bi-dash-circle text-danger me-2"></i>
                                <small>Zdanění výnosu</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal pro pokročilé nastavení -->
        <div class="modal fade" id="settingsModal" tabindex="-1">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">
                            <i class="bi bi-sliders"></i> Pokročilé nastavení
                        </h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <!-- Přednastavené profily -->
                        <div class="mb-4">
                            <h6>Rychlé nastavení investic:</h6>
                            <div class="btn-group w-100" role="group">
                                <button type="button" class="btn btn-outline-primary" onclick="setInvestmentProfile('conservative')">
                                    Konzervativní (4%)
                                </button>
                                <button type="button" class="btn btn-outline-primary" onclick="setInvestmentProfile('balanced')">
                                    Vyvážené (6%)
                                </button>
                                <button type="button" class="btn btn-outline-primary" onclick="setInvestmentProfile('dynamic')">
                                    Dynamické (9%)
                                </button>
                            </div>
                        </div>
                        
                        <!-- Úrokové sazby -->
                        <h6>Očekávané výnosy a inflace:</h6>
                        <div class="row g-3 mb-4">
                            <div class="col-md-4">
                                <label for="set_sporak_urok" class="form-label">Spořák/BÚ (%)</label>
                                <input type="number" class="form-control" id="set_sporak_urok" value="2" step="0.1">
                            </div>
                            <div class="col-md-4">
                                <label for="set_stavebko_urok" class="form-label">Stavebko (%)</label>
                                <input type="number" class="form-control" id="set_stavebko_urok" value="1.5" step="0.1">
                            </div>
                            <div class="col-md-4">
                                <label for="set_penzijko_urok" class="form-label">Penzijko (%)</label>
                                <input type="number" class="form-control" id="set_penzijko_urok" value="4" step="0.1">
                            </div>
                            <div class="col-md-4">
                                <label for="set_investice_urok" class="form-label">Investice (%)</label>
                                <input type="number" class="form-control" id="set_investice_urok" value="5" step="0.1" readonly>
                                <small class="form-text text-muted">Automaticky nastaveno podle doby</small>
                            </div>
                            <div class="col-md-4">
                                <label for="set_dan" class="form-label">Daň (%)</label>
                                <input type="number" class="form-control" id="set_dan" value="15" step="1">
                            </div>
                            <div class="col-md-4">
                                <label for="set_inflace" class="form-label">Inflace (%)</label>
                                <input type="number" class="form-control" id="set_inflace" value="3" step="0.1">
                            </div>
                        </div>
                        
                        <!-- Info o dynamickém nastavení investic -->
                        <div class="alert alert-info">
                            <i class="bi bi-info-circle"></i>
                            <strong>Automatické nastavení investic podle doby:</strong><br>
                            1-3 roky: 3% (krátká doba) | 4-6 let: 5% (střední doba) | 7+ let: 7% (dlouhá doba)
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Zavřít</button>
                        <button type="button" class="btn btn-primary" onclick="calculateAll(); bootstrap.Modal.getInstance(document.getElementById('settingsModal')).hide();">
                            Uložit a přepočítat
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Loading overlay -->
        <div id="loadingOverlay" class="position-fixed top-0 start-0 w-100 h-100 d-none" style="background: rgba(0,0,0,0.5); z-index: 9999;">
            <div class="d-flex justify-content-center align-items-center h-100">
                <div class="text-center text-white">
                    <div class="spinner-border mb-3" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                    <div>Zpracovávám...</div>
                </div>
            </div>
        </div>

        <!-- Toast container for notifications -->
        <div class="toast-container position-fixed top-0 end-0 p-3"></div>
    </div>

    <!-- Footer -->
    <footer class="mt-5 py-4 bg-light border-top">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h6 class="text-primary">
                        <i class="bi bi-info-circle"></i> O kalkulačce
                    </h6>
                    <p class="small text-muted mb-2">
                        F!Dos Porovnání produktů je moderní nástroj pro porovnání finančních produktů. 
                        Pomáhá vám najít nejlepší způsob spoření a investování.
                    </p>
                    <p class="small text-muted">
                        <i class="bi bi-shield-check text-success"></i> 
                        Všechny výpočty probíhají lokálně ve vašem prohlížeči.
                    </p>
                </div>
                <div class="col-md-3">
                    <h6 class="text-primary">
                        <i class="bi bi-gear"></i> Funkce
                    </h6>
                    <ul class="list-unstyled small">
                        <li><i class="bi bi-check text-success"></i> Porovnání 4 produktů</li>
                        <li><i class="bi bi-check text-success"></i> Reálné vs nominální hodnoty</li>
                        <li><i class="bi bi-check text-success"></i> Dynamické nastavení investic</li>
                        <li><i class="bi bi-check text-success"></i> Export do PDF</li>
                        <li><i class="bi bi-check text-success"></i> Responzivní design</li>
                    </ul>
                </div>
                <div class="col-md-3">
                    <h6 class="text-primary">
                        <i class="bi bi-exclamation-triangle"></i> Upozornění
                    </h6>
                    <p class="small text-muted">
                        Výsledky kalkulačky jsou pouze orientační. 
                        Pro konkrétní investiční rozhodnutí konzultujte s finančním poradcem.
                    </p>
                    <p class="small text-muted">
                        <strong>Verze:</strong> 2.1 (2025)
                    </p>
                </div>
            </div>
            <hr class="my-3">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <p class="mb-0 small text-muted">
                        © 2025 F!Dos Porovnání produktů - Všechna práva vyhrazena
                    </p>
                </div>
                <div class="col-md-6 text-md-end">
                    <div class="btn-group btn-group-sm" role="group">
                        <button type="button" class="btn btn-outline-secondary btn-sm" onclick="showAbout()">
                            <i class="bi bi-info-circle"></i> O aplikaci
                        </button>
                        <button type="button" class="btn btn-outline-secondary btn-sm" onclick="resetToDefaults()">
                            <i class="bi bi-arrow-clockwise"></i> Reset
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- About Modal -->
    <div class="modal fade" id="aboutModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="bi bi-info-circle"></i> O aplikaci F!Dos Porovnání produktů
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center mb-3">
                        <i class="bi bi-calculator display-4 text-primary"></i>
                        <h4 class="mt-2">F!Dos Porovnání produktů v2.1</h4>
                    </div>
                    
                    <h6>Účel aplikace:</h6>
                    <p>Moderní kalkulačka pro porovnání výkonnosti různých finančních produktů. Pomáhá najít optimální způsob spoření a investování s ohledem na inflaci, daně a investiční horizont.</p>
                    
                    <h6>Podporované produkty:</h6>
                    <ul>
                        <li><strong>Spořící účty</strong> - klasické bankovní produkty (2% p.a.)</li>
                        <li><strong>Stavební spoření</strong> - se státními příspěvky (1.5% p.a.)</li>
                        <li><strong>Penzijní spoření</strong> - s výpočtem státních příspěvků (4% p.a.)</li>
                        <li><strong>Investice</strong> - dynamické nastavení podle doby (3-7% p.a.)</li>
                    </ul>
                    
                    <h6>Novinky ve verzi 2.1:</h6>
                    <ul>
                        <li>Dynamické nastavení výnosů investic podle investičního horizontu</li>
                        <li>Přehlednější zobrazení vložených částek</li>
                        <li>Formátování čísel s oddělovači tisíců</li>
                        <li>Adaptivní výška karet podle zobrazených sekcí</li>
                        <li>Zjednodušené nastavení bez poplatků</li>
                    </ul>
                    
                    <div class="alert alert-warning">
                        <i class="bi bi-exclamation-triangle"></i>
                        <strong>Důležité:</strong> Výsledky jsou pouze orientační a nenahrazují profesionální finanční poradenství.
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Zavřít</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JavaScript -->
    <?!= include('script'); ?>

    <!-- Additional helper functions -->
    <script>
        // Show About modal
        function showAbout() {
            const modal = new bootstrap.Modal(document.getElementById('aboutModal'));
            modal.show();
        }

        // Reset to default values
        function resetToDefaults() {
            if (confirm('Opravdu chcete resetovat všechna nastavení na výchozí hodnoty?')) {
                // Reset main inputs
                document.getElementById('jednoraz').value = '50 000';
                document.getElementById('pravidelka').value = '2 000';
                document.getElementById('doba').value = '10';
                
                // Reset settings - nové defaulty
                document.getElementById('set_sporak_urok').value = '2';
                document.getElementById('set_stavebko_urok').value = '1.5';
                document.getElementById('set_penzijko_urok').value = '4';
                document.getElementById('set_investice_urok').value = '5';
                document.getElementById('set_dan').value = '15';
                document.getElementById('set_inflace').value = '3';
                
                // Reset checkboxes
                ['sporak', 'stavebko', 'penzijko', 'investice', 'nominal', 'real', 'plusy'].forEach(id => {
                    const checkbox = document.getElementById(`check_${id}`);
                    if (checkbox) checkbox.checked = true;
                });
                
                // Clear localStorage
                if (typeof Storage !== 'undefined') {
                    localStorage.removeItem('fidosCalculatorSettings');
                }
                
                // Recalculate
                if (window.calculator) {
                    window.calculator.updateInvestmentRate();
                    window.calculator.toggleProductVisibility();
                    window.calculator.toggleSectionVisibility();
                    window.calculator.calculateAll();
                }
                
                alert('Nastavení bylo resetováno na výchozí hodnoty');
            }
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            // Ctrl+R - Reset
            if (e.ctrlKey && e.key === 'r') {
                e.preventDefault();
                resetToDefaults();
            }
            
            // Ctrl+P - PDF Export
            if (e.ctrlKey && e.key === 'p') {
                e.preventDefault();
                exportToPDF();
            }
            
            // Enter - Calculate
            if (e.key === 'Enter' && !e.ctrlKey && !e.shiftKey) {
                const activeElement = document.activeElement;
                if (activeElement && ['INPUT', 'SELECT'].includes(activeElement.tagName)) {
                    e.preventDefault();
                    calculateAll();
                }
            }
            
            // F1 - About
            if (e.key === 'F1') {
                e.preventDefault();
                showAbout();
            }
        });
    </script>
</body>
</html>
